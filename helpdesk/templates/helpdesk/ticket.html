{% extends 'helpdesk/base.html' %}

{% block controller %}TicketController{% endblock %}

{% block title %}Ticket{% endblock %}

{% block content %}
    {% verbatim %}
    <div flex-gt-sm="70" flex>
        <md-card>
            <md-card-header>
                <md-card-header-text>
                    <span class="md-title">HD-{{ ticket.id }} {{ ticket.title }}</span>
                </md-card-header-text>
            </md-card-header>
            <div class="ticket-info">
                <div class="customer-label">{{ ticket.customer_name }}</div>
                <div class="ticket-created">{{ ticket.created|date }}</div>
            </div>
            <md-card-content>
                <div ng-bind-html="ticket.body"></div>
            </md-card-content>

            <div ng-repeat="comment in ticket.comments">
                <div class="ticket-info ticket-info--right">
                    <div class="customer-label">{{ comment.author.first_name }} {{ comment.author.last_name }}</div>
                    <div class="ticket-created">{{ comment.created|date }}</div>
                </div>
                <md-card-content>
                    <div ng-bind-html="comment.body"></div>
                </md-card-content>
            </div>
        </md-card>
    </div>
    <div flex-gt-sm="30" flex>
        <md-card>
            <md-card-header>
                <md-card-header-text>
                    <span class="md-title">Ticket info</span>
                </md-card-header-text>
            </md-card-header>

            <md-card-content>
                <p>State: {{ ticket.state.title }}</p>
            </md-card-content>
        </md-card>
    </div>
    {% endverbatim %}
{% endblock %}

{% block pre_script %}
    <script>
        var ticketId = {{ object.pk }};
    </script>
{% endblock %}